# 任务和清单的元数据

与页面类似，您还可以在列表项和任务级别添加**字段**，以便将特定任务绑定为上下文。为此，您需要使用[内联字段语法](../add-metadata/#inline-fields)：

```markdown
- [ ] 你好，这是[metadata:: 值]！
- [X] 我在[completion:: 2021-08-15]完成这项工作。
```

任务和清单项在数据方面是相同的，因此您所有的项目符号点都可以访问此处描述的所有信息。

## 字段简写

[Tasks](*** 插件引入了一种不同的[使用 Emoji 进行配置](***以关联任务相关日期的表示法。在 Dataview 的上下文中，这种表示法被称为 `字段简写`。当前版本的 Dataview 仅支持以下日期简写。优先级和周期简写不受支持。

\=== "示例"

\=== "示例"
\- \[ ] 本周六到期 🗓️2021-08-29
\- \[x] 上周六已完成 ✅2021-08-22
\- \[ ] 我在 ➕1990-06-14 创建了这个
\- \[ ] 这个任务我可以周末开始 🛫2021-08-29
\- \[x] 我提前完成了这个任务 ⏳2021-08-29 ✅2021-08-22

这些 Emoji-简写有两个特定之处。首先，它们省略了内联字段语法（不需要 `[🗓️:: YYYY-MM-DD]`），其次，它们在数据方面映射到一个**文本**字段名称：

| 字段名称 | 简写语法 |
| -------- | -------- |
| due       | `🗓️YYYY-MM-DD` |
| completion | `✅YYYY-MM-DD` |
| created   | `➕YYYY-MM-DD` |
| start     | `🛫YYYY-MM-DD` |
| scheduled | `⏳YYYY-MM-DD` |

这意味着如果您想要查询所有在 2021-08-22 完成的任务，您将编写：

````markdown
```dataview
TASK
WHERE completion = date("2021-08-22")
```
````

这将列出简写和文本注释的两种变体：

```markdown
- [x] 上周六已完成 ✅2021-08-22
- [x] 一些已完成的任务 [completion:: 2021-08-22]
```

请注意，根据您的具体情况，您可能需要调整文本以确保文化适宜性和地区差异。在进行翻译时，请注意保持优雅和准确。

## 隐式字段

与页面类似，Dataview 为每个任务或列表项添加了一系列隐式字段：

!!! info "字段继承"
任务会从其父页面继承*所有字段* - 因此，如果你的页面中有一个 `rating` 字段，你也可以在 `TASK` 查询中访问它。

| 字段名称       | 数据类型 | 描述                                                                                                                                                                                                                                                          |
| ------------- | -------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `status`      | 文本     | 该任务的完成状态，由方括号 `[ ]` 中的字符决定。通常为空格 `" "` 表示未完成任务，而 `"x"` 表示已完成任务，但支持插件以支持其他任务状态。                                                                                                                                      |
| `checked`     | 布尔值   | 该任务状态是否**非空**，意味着它在 `[ ]` 括号中有 `status` 字符（可能是 `"x"`），而不是空格。                                                                                                                                                           |
| `completed`   | 布尔值   | 该特定任务是否已完成；这不考虑任何子任务的完成或未完成情况。如果一个任务被标记为 `"x"`，则被视为“已完成”。如果你使用自定义状态，例如 `[-]`，`checked` 将为 true，而 `completed` 将为 false。                                                                 |
| `fullyCompleted` | 布尔值 | 该任务及其所有子任务是否已完成。                                                                                                                                                                                                                                        |
| `text`        | 文本     | 这个任务的纯文本，包括任何元数据字段注释。                                                                                                                                                                                                                                                 |
| `visual`      | 文本     | 这个任务的文本，由 Dataview 渲染。此字段可以在 DataviewJS 中被覆盖，允许使用与常规任务文本不同的任务文本进行渲染，同时仍允许任务被检查（因为 Dataview 验证逻辑通常会将文本与文件中的文本进行比较）。       |
| `line`        | 数字     | 文件中显示此任务的行号。                                                                                                                                                                                                                                        |
| `lineCount`   | 数字     | 这个任务占用的 Markdown 行数。                                                                                                                                                                                                                                  |
| `path`        | 文本     | 这个任务所在的文件的完整路径。等于 [页面](./metadata-pages.md) 的 `file.path`。                                                                                                                                                                           |
| `section`     | 链接     | 指向包含此任务的节的链接。                                                                                                                                                                                                                                     |
| `tags`        | 列表     | 任务文本中的任何标签。                                                                                                                                                                                                                                         |
| `outlinks`    | 列表     | 此任务中定义的任何链接。                                                                                                                                                                                                                                      |
| `link`        | 链接     | 最接近此任务的可链接块的链接；对创建指向任务的链接很有用。                                                                                                                                                                                                      |
| `children`    | 列表     | 这个任务的任何子任务或子列表。                                                                                                                                                                                                                                 |
| `task`        | 布尔值   | 如果为 true，则这是一个任务；否则，它是一个常规列表元素。                                                                                                                                                                                                      |
| `annotated`   | 布尔值   | 如果任务文本包含任何元数据字段，则为 true，否则为 false。                                                                                                                                                                                                     |
| `parent`      | 数字     | 如果存在，则为该任务上方的任务的行号；如果这是根级任务，则为 null。                                                                                                                                                                                            |
| `blockId`     | 文本     | 如果使用 `^blockId` 语法定义了该任务 / 列表元素的块 ID，则为该块 ID；否则为 null。                                                                                                                                                                          |

使用 [缩写语法](#field-shorthands) 时，可能还会提供以下附加属性：

- `completion`: 任务完成的日期。
- `due`: 任务的截止日期（如果有的话）。
- `created`: 任务创建的日期。
- `start`: 任务可以开始的日期。
- `scheduled`: 任务安排工作的日期。

### 访问查询中的隐式字段

如果您使用的是[TASK](../queries/query-types.md#task-queries)查询，您的任务是顶级信息，可以直接使用，无需任何前缀：

````markdown
```dataview
TASK
WHERE !fullyCompleted
```
````

对于其他任何查询类型，您首先需要访问隐式字段`file.lists`或`file.tasks`来检查这些列表项特定的隐式字段：

````markdown
```dataview
LIST
WHERE any(file.tasks, (t) => !t.fullyCompleted)
```
````

这将返回所有包含未完成任务的文件链接。由于我们返回的是页面级别的任务列表，因此需要使用[list函数](../reference/functions.md)来检查每个元素。

