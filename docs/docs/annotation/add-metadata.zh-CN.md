# 给您的页面添加元数据

Dataview 无法查询您保险库中的所有内容。为了能够进行搜索、过滤和显示内容，这些内容需要被**索引**。一些内容会自动被索引，例如项目符号或任务列表，这些被称为**隐式字段**，更多信息请见下文。而其他数据需要保存在元数据**字段**中，以便通过 Dataview 可以访问。

## 什么是“字段”？

元数据字段是一对 **键** 和 **值**。字段的 *值* 有数据类型（更多信息请参见[这里](./types-of-metadata.md)），这决定了查询时该字段的行为。

您可以向 **笔记**、**列表项** 或 **任务** 添加任意数量的字段。

## 如何添加字段？

您可以以三种不同的方式向 **笔记** 添加字段。添加字段的方式决定了它的外观。

在 **任务** 或 **列表项** 上，您将可以使用 YAML 前置信息，但无法将其添加到特定的列表项或任务中。如果您想向单个列表项或任务添加元数据，请使用[内联字段](#inline-fields)。

### 前置信息

前置信息是 Markdown 的一种常见扩展，允许在页面顶部添加 YAML 元数据。它由 Obsidian 原生支持，并在其[官方文档](***中有解释。所有 YAML 前置信息字段将自动作为 Dataview 字段可用。

```yaml
---
alias: "document"
last-reviewed: 2021-08-17
thoughts:
  rating: 8
  reviewable: false
---
```

使用此信息，您的笔记具有名为 `alias`、`last-reviewed` 和 `thoughts` 的元数据字段。每个字段都有不同的 **数据类型**：

- `alias` 是一个 [文本](../types-of-metadata/#text)，因为它被包含在 `""` 中
- `last-reviewed` 是一个 [日期](../types-of-metadata/#date)，因为它遵循 ISO 日期格式
- `thoughts` 是一个 [对象](../types-of-metadata/#object) 字段，因为它使用了 YAML 前置信息对象语法

您可以使用以下查询来查找此笔记：

````
```dataview
LIST
WHERE thoughts.rating = 8
```
````

### 内联字段

对于那些希望看起来更自然的注释，Dataview 支持通过 `Key:: Value` 语法的“内联”字段，您可以在文件中的任何地方使用它。这允许您在需要的地方直接写入可查询的数据，例如在句子中间。

如果您的内联字段在一行中有自己的内容，没有其他内容在前面，您可以这样写：

```markdown
# Markdown 页面

基本字段:: 一些随机值
**粗体字段**:: 很好！
```

在 `::` 后面的所有内容都是字段的值，直到下一个换行符。

!!! hint "注意 `::`"
请注意，当使用内联字段时，您需要在键和值之间使用双冒号 `::`，与 YAML 前置信息字段使用一个冒号不同。

如果您想在句子中嵌入元数据，或者在同一行上添加多个字段，可以使用方括号语法，并将您的字段包裹在方括号中：

```markdown
我会给这个评分为 [rating:: 9]！它的 [mood:: 可接受]。
```

!!! info "列表项和任务的字段"
当您想用元数据注释列表项，例如任务时，您总是需要使用方括号语法（因为字段不是该行的唯一信息）
`markdown      - [ ] 向 David 发送一封关于截止日期的邮件 [due:: 2022-04-05]。`

方括号内联字段是向特定列表项显式添加字段的唯一方式，YAML 前置信息总是应用于整个页面（但也可在列表项的上下文中使用）。

还有一种替代的括号语法，它在阅读器模式下隐藏键：

```markdown
这不会显示 (longKeyIDontNeedWhenReading:: 键)。
```

将渲染为：

```markdown
这不会显示键。
```

您可以在同一文件中将 YAML 前置信息和内联字段与所有语法变体一起使用。您不需要为一个做出决定，可以混合使用以适应您的工作流程。

## 字段名称

想象一下，如果在一个笔记中使用了上述所有内联字段的示例，那么你可以访问以下元数据：

| 元数据键             | 清理后的元数据键       | 值                         | 值的数据类型 |
| ------------------- | ---------------------- | -------------------------- | ------------ |
| `Basic Field`       | `basic-field`          | 一些随机值                 | 文本         |
| `Bold Field`        | `bold-field`           | 很好！                      | 文本         |
| `rating`            | -                      | 9                          | 数字         |
| `mood`              | -                      | 可接受                     | 文本         |
| `due`               | -                      | 日期对象为2022-04-05       | 日期         |
| `longKeyIDontNeedWhenReading` | `longkeyidontneedwhenreading` | 键                           | 文本         |

如你所见，在表格中，如果在元数据键名称中使用了**空格或大写字母**，dataview将为你提供一个**清理后的版本**的键。

**带有空格的键**不能直接用于查询。这里有两种选择：要么使用清理后的名称，它总是全部小写，并用破折号代替空格，要么使用**行**变量语法。更多内容请参见[FAQ](../resources/faq.md)。

**带有大写字母的键**可以按原样使用，如果你愿意。清理后的版本允许你查询一个键，不受其大小写的影响，并使其更容易使用：你可以在一个文件名为`someMetadata`的文件和另一个名为`someMetaData`的文件中查询同一个字段，当使用清理后的键`somemetadata`时。

此外，**粗体字段键缺少其格式化标记**。即使`**`用于使其加粗的键名在文件中是部分，它们在索引你的笔记时被省略。对于所有其他内置格式（如删除线或斜体）也是如此。这意味着格式化的键只能在查询时省略其格式。这样，你就可以在不担心可能为同一类型的信息创建不同键的情况下，在笔记的上下文中格式化键。

### 使用表情符号和非拉丁字符

在命名元数据字段时，你不受限于拉丁字符。你可以使用UTF-8中所有可用的字符：

```markdown
Noël:: 一个游戏机
クリスマス:: 家用游戏机
[🎅:: 一个游戏机]
[xmas🎄:: 一个游戏机]
```

**使用表情符号作为元数据键**是可能的，但存在一些限制。在字段名中使用表情符号时，你需要将它们放入方括号中，以便dataview正确识别它们。
另外，请注意，在从一个操作系统切换到另一个操作系统（例如，从Windows切换到Android）时，同一个表情符号可能使用另一个字符代码，当你查询它时可能找不到你的元数据。

!!! info "任务字段缩写"
对于任务的[缩写语法](./metadata-tasks.md#field-shorthands)是一个例外。你可以使用不带方括号的缩写。请注意，这只适用于列出的缩写——任何其他字段（无论是带有表情符号还是没有）都需要使用`[key:: value]`语法。

## 隐式字段

即使你没有在笔记中显式添加任何元数据，dataview也会为你提供大量的索引数据。一些隐式字段的示例包括：

- 文件创建日期（`file.cday`）
- 文件中的链接（`file.outlinks`）
- 文件中的标签（`file.etags`）
- 文件中的所有列表项（`file.lists`和`file.tasks`）

等等。可用的隐式字段因你查看的是页面还是列表项而异。在[页面的元数据](metadata-pages.md)和[任务和列表的元数据](metadata-tasks.md)中找到所有可用的隐式字段的完整列表。

